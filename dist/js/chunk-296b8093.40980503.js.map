{"version":3,"sources":["webpack:///./node_modules/_@babel_runtime@7.11.2@@babel/runtime/helpers/esm/classCallCheck.js","webpack:///./src/components/search/search.vue?c9e4","webpack:///./src/base/search-box/search-box.vue?6a24","webpack:///src/base/search-box/search-box.vue","webpack:///./src/base/search-box/search-box.vue?f893","webpack:///./src/base/search-box/search-box.vue","webpack:///./src/base/search-list/search-list.vue?2630","webpack:///src/base/search-list/search-list.vue","webpack:///./src/base/search-list/search-list.vue?5653","webpack:///./src/base/search-list/search-list.vue","webpack:///./src/components/suggest/suggest.vue?7870","webpack:///./src/api/search.js","webpack:///src/components/suggest/suggest.vue","webpack:///./src/components/suggest/suggest.vue?a6e4","webpack:///./src/components/suggest/suggest.vue","webpack:///src/components/search/search.vue","webpack:///./src/components/search/search.vue?8ee5","webpack:///./src/components/search/search.vue","webpack:///./src/components/search/search.vue?ba15","webpack:///./src/base/search-list/search-list.vue?28fe","webpack:///./src/common/js/singer.js","webpack:///./src/components/suggest/suggest.vue?5337","webpack:///./node_modules/_@babel_runtime@7.11.2@@babel/runtime/helpers/esm/createClass.js","webpack:///./src/common/js/song.js","webpack:///./src/base/search-box/search-box.vue?a743"],"names":["_classCallCheck","instance","Constructor","TypeError","render","_vm","this","_h","$createElement","_c","_self","attrs","staticClass","ref","on","query","directives","name","rawName","value","newQuery","expression","shortCut","_v","_l","item","index","key","$event","addQuery","first","_s","searchHistory","deleteAll","deleteSearchHistory","saveSearch","scrollList","clearSearchHistory","staticRenderFns","back","placeholder","domProps","target","composing","clear","props","type","String","default","data","methods","blur","$refs","$router","setQuery","created","$watch","component","select","stopPropagation","deleteOne","Array","$emit","result","options","scrollEvents","onPullingUp","beforeScroll","length","searchSuggest","selectSuggset","img1v1Url","coverImgUrl","suggestTitle","selectItem","songName","singer","hasMore","getHotKey","axios","get","HOST","search","offset","pullUpLoad","refresh","suggest","alPicUrl","res","album","picUrl","id","push","setSinger","path","setDisc","searchMore","forceUpdate","then","code","_search","scrollTo","_searchSuggest","_checkMore","songs","songCount","_normalizeSongs","list","forEach","ret","watch","mixins","components","SearchBox","Suggest","SearchList","Confirm","hotKey","computed","concat","_getHotKey","confirm","show","handlePlaylist","style","bottom","scroll","saveSearchHistory","searchBox","setTimeout","Singer","_defineProperties","i","descriptor","enumerable","configurable","writable","Object","defineProperty","_createClass","protoProps","staticProps","prototype","Song","alId","alName","alia","songId","lyric","Promise","resolve","reject","getLyric","ERR_OK","lrc","createSong","musicData","filterSinger","ar","al","filterAlia","privilege","createPlaylistSong","playlist","createSearchSong","artists","alias","arItem","join","element"],"mappings":"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","file":"js/chunk-296b8093.40980503.js","sourcesContent":["export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('transition',{attrs:{\"name\":\"search\"}},[_c('div',{staticClass:\"search-box-wrapper\"},[_c('search-box',{ref:\"searchBox\",on:{\"query\":_vm.query}}),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.newQuery),expression:\"!newQuery\"}],ref:\"shortcut-wrapper\",staticClass:\"shortcut-wrapper\"},[_c('cube-scroll',{ref:\"scroll\",attrs:{\"data\":_vm.shortCut}},[_c('div',{staticClass:\"shortcut\"},[_c('div',{staticClass:\"hot-key\"},[_c('h1',{staticClass:\"title\"},[_vm._v(\"热门搜索\")]),_c('ul',_vm._l((_vm.hotKey),function(item,index){return _c('li',{key:index,staticClass:\"item\",on:{\"click\":function($event){return _vm.addQuery(item.first)}}},[_c('span',[_vm._v(_vm._s(item.first))])])}),0)]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.searchHistory.length),expression:\"searchHistory.length\"}],staticClass:\"search-history\"},[_c('div',{staticClass:\"search-title\"},[_c('h1',{staticClass:\"title\"},[_vm._v(\"搜索历史\")]),_c('svg',{staticClass:\"icon\",attrs:{\"aria-hidden\":\"true\"},on:{\"click\":_vm.deleteAll}},[_c('use',{attrs:{\"xlink:href\":\"#icon-laji\"}})])]),_c('div',{staticClass:\"search-list\"},[_c('search-list',{attrs:{\"searchHistory\":_vm.searchHistory},on:{\"select\":_vm.addQuery,\"deleteOne\":_vm.deleteSearchHistory}})],1)])])])],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.newQuery),expression:\"newQuery\"}],ref:\"suggest-scroll\",staticClass:\"suggest-scroll\"},[_c('suggest',{ref:\"suggest\",attrs:{\"query\":_vm.newQuery},on:{\"saveSearch\":_vm.saveSearch,\"scrollList\":_vm.scrollList}})],1),_c('confirm',{ref:\"confirm\",attrs:{\"content\":\"是否清空所有搜索历史\",\"confirmBtnText\":\"清空\"},on:{\"confirm\":_vm.clearSearchHistory}}),_c('router-view')],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"search-box\"},[_c('svg',{staticClass:\"icon icon-search\",attrs:{\"aria-hidden\":\"true\"},on:{\"click\":_vm.back}},[_c('use',{attrs:{\"xlink:href\":\"#icon-right\"}})]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.query),expression:\"query\"}],ref:\"query\",staticClass:\"box\",attrs:{\"type\":\"text\",\"placeholder\":_vm.placeholder},domProps:{\"value\":(_vm.query)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.query=$event.target.value}}}),_c('svg',{staticClass:\"icon icon-dismiss\",attrs:{\"aria-hidden\":\"true\"},on:{\"click\":_vm.clear}},[_c('use',{attrs:{\"xlink:href\":\"#icon-cha\"}})])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"search-box\">\r\n    <svg @click=\"back\" class=\"icon icon-search\" aria-hidden=\"true\">\r\n      <use xlink:href=\"#icon-right\"></use>\r\n    </svg>\r\n    <input ref=\"query\" type=\"text\" class=\"box\" v-model=\"query\" :placeholder=\"placeholder\">\r\n    <svg @click=\"clear\" class=\"icon icon-dismiss\" aria-hidden=\"true\">\r\n      <use xlink:href=\"#icon-cha\"></use>\r\n    </svg>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { debounce } from \"common/js/util.js\";\r\n\r\nexport default {\r\n  props: {\r\n    placeholder: {\r\n      type: String,\r\n      default: \"搜索歌曲、歌手\"\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      query: \"\"\r\n    };\r\n  },\r\n  methods: {\r\n    blur() {\r\n      this.$refs.query.blur();\r\n    },\r\n    back() {\r\n      this.$router.back();\r\n      this.query = \"\";\r\n    },\r\n    clear() {\r\n      this.query = \"\";\r\n    },\r\n    setQuery(query) {\r\n      this.query = query;\r\n    }\r\n  },\r\n  created() {\r\n    this.$watch(\r\n      \"query\",\r\n      debounce(newQuery => {\r\n        this.$emit(\"query\", newQuery);\r\n      }, 200)\r\n    );\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import \"common/scss/variable.scss\";\r\n\r\n.search-box {\r\n  display: flex;\r\n  align-items: center;\r\n  box-sizing: border-box;\r\n  width: 100%;\r\n  height: 45px;\r\n  background-color: $color-background;\r\n  .icon-search {\r\n    font-size: $font-size-large;\r\n    color: $color-icon;\r\n    padding: 0 10px;\r\n  }\r\n  .box {\r\n    flex: 1;\r\n    line-height: 25px;\r\n    color: $color-text;\r\n    font-size: $font-size-medium;\r\n    background-color: $color-background;\r\n    border-bottom: 1px solid $color-border-input;\r\n    outline: none;\r\n    &::placeholder {\r\n      color: $color-text-d;\r\n    }\r\n  }\r\n  .icon-dismiss {\r\n    font-size: $font-size-medium;\r\n    color: $color-icon;\r\n    padding: 0 10px;\r\n  }\r\n}\r\n</style>\r\n\r\n\r\n","import mod from \"-!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js??ref--16-2!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./search-box.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js??ref--16-2!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./search-box.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./search-box.vue?vue&type=template&id=f1b0b2ec&scoped=true&\"\nimport script from \"./search-box.vue?vue&type=script&lang=js&\"\nexport * from \"./search-box.vue?vue&type=script&lang=js&\"\nimport style0 from \"./search-box.vue?vue&type=style&index=0&id=f1b0b2ec&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"f1b0b2ec\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"search-list\"},[_c('ul',_vm._l((_vm.searchHistory),function(item,index){return _c('li',{key:index,staticClass:\"search-warapper\",on:{\"click\":function($event){return _vm.select(item)}}},[_c('span',{staticClass:\"search-text\"},[_vm._v(_vm._s(item))]),_c('svg',{staticClass:\"icon\",attrs:{\"aria-hidden\":\"true\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.deleteOne(item)}}},[_c('use',{attrs:{\"xlink:href\":\"#icon-cha\"}})])])}),0)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"search-list\">\r\n    <ul>\r\n      <li\r\n        @click=\"select(item)\"\r\n        v-for=\"(item,index) in searchHistory\"\r\n        :key=\"index\"\r\n        class=\"search-warapper\"\r\n      >\r\n        <span class=\"search-text\">{{item}}</span>\r\n        <svg @click.stop=\"deleteOne(item)\" class=\"icon\" aria-hidden=\"true\">\r\n          <use xlink:href=\"#icon-cha\"></use>\r\n        </svg>\r\n      </li>\r\n    </ul>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  props: {\r\n    searchHistory: {\r\n      type: Array,\r\n      default: () => []\r\n    }\r\n  },\r\n  methods: {\r\n    select(item) {\r\n      this.$emit(\"select\", item);\r\n    },\r\n    deleteOne(item) {\r\n      this.$emit(\"deleteOne\", item);\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.search-list {\r\n  width: 100%;\r\n  .search-warapper {\r\n    display: flex;\r\n    margin-bottom: 20px;\r\n    .search-text {\r\n      flex: 1;\r\n    }\r\n  }\r\n}\r\n</style>\r\n\r\n","import mod from \"-!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js??ref--16-2!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./search-list.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js??ref--16-2!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./search-list.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./search-list.vue?vue&type=template&id=d09e7c9c&scoped=true&\"\nimport script from \"./search-list.vue?vue&type=script&lang=js&\"\nexport * from \"./search-list.vue?vue&type=script&lang=js&\"\nimport style0 from \"./search-list.vue?vue&type=style&index=0&id=d09e7c9c&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"d09e7c9c\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('cube-scroll',{ref:\"suggest\",staticClass:\"suggest\",attrs:{\"data\":_vm.result,\"options\":_vm.options,\"scrollEvents\":_vm.scrollEvents},on:{\"pulling-up\":_vm.onPullingUp,\"before-scroll-start\":_vm.beforeScroll}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.result.length||_vm.searchSuggest.length),expression:\"result.length||searchSuggest.length\"}],staticClass:\"bestMatch\"},[_vm._v(\"最佳匹配\")]),_c('ul',{staticClass:\"suggest-list\"},_vm._l((_vm.searchSuggest),function(item,index){return _c('li',{key:index,staticClass:\"suggest-list-item\",on:{\"click\":function($event){return _vm.selectSuggset(item)}}},[_c('img',{staticClass:\"suggest-item-img\",attrs:{\"src\":item.img1v1Url || item.coverImgUrl}}),_c('div',{staticClass:\"suggest-item-mes\"},[_c('span',[_vm._v(_vm._s(_vm.suggestTitle(item)))]),_c('span',[_vm._v(_vm._s(item.name))])])])}),0),_c('ul',{staticClass:\"suggest-songs-list\"},_vm._l((_vm.result),function(item,index){return _c('li',{key:index,staticClass:\"suggest-songs-item\",on:{\"click\":function($event){return _vm.selectItem(item)}}},[_c('div',{staticClass:\"name\"},[_vm._v(_vm._s(item.songName))]),_c('div',{staticClass:\"singer\"},[_vm._v(_vm._s(item.singer))])])}),0),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.result.length&&!_vm.hasMore&&!_vm.searchSuggest.length),expression:\"!result.length&&!hasMore&&!searchSuggest.length\"}],staticClass:\"no-result-wrapper\"},[_vm._v(\"抱歉，暂无搜索结果\")]),_c('cube-loading',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.result.length&&!_vm.searchSuggest.length),expression:\"!result.length&&!searchSuggest.length\"}],staticClass:\"loading_container\",attrs:{\"size\":40}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import axios from \"axios\";\r\nimport { HOST } from \"common/js/config\";\r\n\r\nexport function getHotKey() {\r\n  return axios.get(`${HOST}/search/hot`);\r\n}\r\n\r\nexport function search(query, offset) {\r\n  return axios.get(`${HOST}/search?keywords=${query}&&offset=${offset}`);\r\n}\r\n\r\nexport function searchSuggest(query) {\r\n  return axios.get(`${HOST}/search/suggest?keywords= ${query}`);\r\n}\r\n","<template>\r\n  <cube-scroll\r\n    ref=\"suggest\"\r\n    :data=\"result\"\r\n    :options=\"options\"\r\n    @pulling-up=\"onPullingUp\"\r\n    :scrollEvents=\"scrollEvents\"\r\n    class=\"suggest\"\r\n    @before-scroll-start=\"beforeScroll\"\r\n  >\r\n    <div class=\"bestMatch\" v-show=\"result.length||searchSuggest.length\">最佳匹配</div>\r\n    <ul class=\"suggest-list\">\r\n      <li\r\n        @click=\"selectSuggset(item)\"\r\n        class=\"suggest-list-item\"\r\n        v-for=\"(item,index) in searchSuggest\"\r\n        :key=\"index\"\r\n      >\r\n        <img :src=\"item.img1v1Url || item.coverImgUrl\" class=\"suggest-item-img\">\r\n        <div class=\"suggest-item-mes\">\r\n          <span>{{suggestTitle(item)}}</span>\r\n          <span>{{item.name}}</span>\r\n        </div>\r\n      </li>\r\n    </ul>\r\n    <ul class=\"suggest-songs-list\">\r\n      <li\r\n        @click=\"selectItem(item)\"\r\n        class=\"suggest-songs-item\"\r\n        v-for=\"(item,index) in result\"\r\n        :key=\"index\"\r\n      >\r\n        <div class=\"name\">{{item.songName}}</div>\r\n        <div class=\"singer\">{{item.singer}}</div>\r\n      </li>\r\n    </ul>\r\n    <div\r\n      class=\"no-result-wrapper\"\r\n      v-show=\"!result.length&&!hasMore&&!searchSuggest.length\"\r\n    >抱歉，暂无搜索结果</div>\r\n    <cube-loading\r\n      :size=\"40\"\r\n      class=\"loading_container\"\r\n      v-show=\"!result.length&&!searchSuggest.length\"\r\n    ></cube-loading>\r\n  </cube-scroll>\r\n</template>\r\n\r\n<script>\r\nimport { search, searchSuggest } from \"api/search\";\r\nimport { getAlbum } from \"api/song\";\r\nimport { ERR_OK } from \"common/js/config\";\r\nimport { createSearchSong } from \"common/js/song\";\r\nimport Singer from \"common/js/singer\";\r\nimport { mapMutations, mapActions } from \"vuex\";\r\n\r\nexport default {\r\n  props: {\r\n    query: {\r\n      type: String,\r\n      default: \"\"\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      offset: 0,\r\n      result: [],\r\n      options: {\r\n        pullUpLoad: true\r\n      },\r\n      hasMore: true,\r\n      searchSuggest: [],\r\n      scrollEvents: [\"before-scroll-start\"]\r\n    };\r\n  },\r\n  methods: {\r\n    ...mapMutations({\r\n      setSinger: \"SET_SINGER\",\r\n      setDisc: \"SET_DISC\"\r\n    }),\r\n    ...mapActions([\"insertSong\"]),\r\n    refresh() {\r\n      this.$refs.suggest.refresh();\r\n    },\r\n    selectItem(item) {\r\n      getAlbum(item.alId).then(res => {\r\n        item.alPicUrl = res.data.album.picUrl;\r\n        this.insertSong(item);\r\n      });\r\n      this.$emit(\"saveSearch\");\r\n    },\r\n    beforeScroll() {\r\n      this.$emit(\"scrollList\");\r\n    },\r\n    selectSuggset(item) {\r\n      if (\"img1v1Url\" in item) {\r\n        const singer = new Singer({\r\n          id: item.id,\r\n          name: item.name,\r\n          img1v1Url: item.img1v1Url\r\n        });\r\n        this.$router.push({ path: `/search/singer/${singer.id}` });\r\n        this.setSinger(singer);\r\n      } else {\r\n        this.$router.push({\r\n          path: `/search/disc/${item.id}`\r\n        });\r\n        this.setDisc(item);\r\n      }\r\n      this.$emit(\"saveSearch\"); // 当我们点击搜索结果的时候我们把搜索的关键词保存在本地存储中\r\n    },\r\n    suggestTitle(item) {\r\n      if (\"img1v1Url\" in item) {\r\n        return \"歌手：\";\r\n      }\r\n      return \"歌单：\";\r\n    },\r\n    onPullingUp() {\r\n      if (!this.hasMore) {\r\n        this.$refs.suggest.forceUpdate();\r\n        return;\r\n      }\r\n      this.searchMore();\r\n    },\r\n    searchMore() {\r\n      this.offset++;\r\n      search(this.query, this.offset).then(res => {\r\n        if (res.data.code === ERR_OK) {\r\n          this.result = this.result.concat(\r\n            this._normalizeSongs(res.data.result.songs)\r\n          );\r\n          this._checkMore(res.data.result);\r\n        }\r\n      });\r\n    },\r\n    _search() {\r\n      this.hasMore = true;\r\n      this.offset = 0;\r\n      this.$refs.suggest.scrollTo(0, 0);\r\n      if (this.query) {\r\n        search(this.query, this.offset).then(res => {\r\n          if (res.data.code === ERR_OK) {\r\n            this.result = this._normalizeSongs(res.data.result.songs);\r\n            this._checkMore(res.data.result);\r\n          }\r\n        });\r\n        this._searchSuggest();\r\n      }\r\n    },\r\n    _searchSuggest() {\r\n      this.searchSuggest = [];\r\n      searchSuggest(this.query).then(res => {\r\n        if (res.data.code === ERR_OK) {\r\n          let result = res.data.result;\r\n          if (\"artists\" in result) {\r\n            this.searchSuggest.push(result.artists[0]);\r\n          }\r\n          if (\"playlists\" in result) {\r\n            this.searchSuggest.push(result.playlists[0]);\r\n          }\r\n        }\r\n      });\r\n    },\r\n    _checkMore(data) {\r\n      if (!data.songs || (this.offset + 1) * 30 >= data.songCount) {\r\n        this.hasMore = false;\r\n      }\r\n    },\r\n    _normalizeSongs(list) {\r\n      let ret = [];\r\n      if (!list) {\r\n        return ret;\r\n      }\r\n      list.forEach(item => {\r\n        if (item.id && item.album.id) {\r\n          ret.push(createSearchSong(item));\r\n        }\r\n      });\r\n      return ret;\r\n    }\r\n  },\r\n  watch: {\r\n    query() {\r\n      this._search();\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import \"common/scss/variable.scss\";\r\n@import \"common/scss/mixin.scss\";\r\n\r\n.suggest {\r\n  height: 100%;\r\n  overflow: hidden;\r\n  .bestMatch {\r\n    padding: 0 20px;\r\n    line-height: 30px;\r\n    font-size: $font-size-small;\r\n    color: $color-text-theme;\r\n  }\r\n  .suggest-list {\r\n    .suggest-list-item {\r\n      display: flex;\r\n      align-items: center;\r\n      padding: 10px 0 10px 20px;\r\n      border-bottom: 1px solid $color-border;\r\n      .suggest-item-img {\r\n        width: 50px;\r\n        height: 50px;\r\n        margin-right: 10px;\r\n      }\r\n      .suggest-item-mes {\r\n        line-height: 50px;\r\n        font-size: $font-size-medium;\r\n      }\r\n    }\r\n  }\r\n  .suggest-songs-list {\r\n    .suggest-songs-item {\r\n      padding: 20px 0 10px 20px;\r\n      border-bottom: 1px solid $color-border;\r\n      .name {\r\n        @include no-row;\r\n      }\r\n      .singer {\r\n        padding-top: 5px;\r\n        color: $color-light;\r\n        font-size: $font-size-small;\r\n        @include no-row;\r\n      }\r\n    }\r\n  }\r\n  .no-result-wrapper {\r\n    position: absolute;\r\n    width: 100%;\r\n    top: 40%;\r\n    text-align: center;\r\n  }\r\n  .loading_container {\r\n    display: flex;\r\n    justify-content: center;\r\n    padding-top: 100px;\r\n  }\r\n}\r\n</style>\r\n\r\n","import mod from \"-!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js??ref--16-2!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./suggest.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js??ref--16-2!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./suggest.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./suggest.vue?vue&type=template&id=bc8d2b06&scoped=true&\"\nimport script from \"./suggest.vue?vue&type=script&lang=js&\"\nexport * from \"./suggest.vue?vue&type=script&lang=js&\"\nimport style0 from \"./suggest.vue?vue&type=style&index=0&id=bc8d2b06&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"bc8d2b06\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <transition name=\"search\">\r\n    <div class=\"search-box-wrapper\">\r\n      <search-box ref=\"searchBox\" @query=\"query\"></search-box>\r\n      <div ref=\"shortcut-wrapper\" class=\"shortcut-wrapper\" v-show=\"!newQuery\">\r\n        <cube-scroll ref=\"scroll\" :data=\"shortCut\">\r\n          <div class=\"shortcut\">\r\n            <div class=\"hot-key\">\r\n              <h1 class=\"title\">热门搜索</h1>\r\n              <ul>\r\n                <li\r\n                  @click=\"addQuery(item.first)\"\r\n                  class=\"item\"\r\n                  v-for=\"(item,index) in hotKey\"\r\n                  :key=\"index\"\r\n                >\r\n                  <span>{{item.first}}</span>\r\n                </li>\r\n              </ul>\r\n            </div>\r\n            <div class=\"search-history\" v-show=\"searchHistory.length\">\r\n              <div class=\"search-title\">\r\n                <h1 class=\"title\">搜索历史</h1>\r\n                <svg @click=\"deleteAll\" class=\"icon\" aria-hidden=\"true\">\r\n                  <use xlink:href=\"#icon-laji\"></use>\r\n                </svg>\r\n              </div>\r\n              <div class=\"search-list\">\r\n                <search-list\r\n                  @select=\"addQuery\"\r\n                  @deleteOne=\"deleteSearchHistory\"\r\n                  :searchHistory=\"searchHistory\"\r\n                ></search-list>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </cube-scroll>\r\n      </div>\r\n      <div class=\"suggest-scroll\" ref=\"suggest-scroll\" v-show=\"newQuery\">\r\n        <suggest @saveSearch=\"saveSearch\" @scrollList=\"scrollList\" ref=\"suggest\" :query=\"newQuery\"></suggest>\r\n      </div>\r\n      <confirm content=\"是否清空所有搜索历史\" confirmBtnText=\"清空\" @confirm=\"clearSearchHistory\" ref=\"confirm\"></confirm>\r\n      <router-view></router-view>\r\n    </div>\r\n  </transition>\r\n</template>\r\n\r\n<script>\r\nimport SearchBox from \"base/search-box/search-box\";\r\nimport SearchList from \"base/search-list/search-list\";\r\nimport Suggest from \"components/suggest/suggest\";\r\nimport Confirm from \"base/confirm/confirm\";\r\nimport { playlistMixin } from \"common/js/mixin\";\r\nimport { getHotKey } from \"api/search\";\r\nimport { ERR_OK } from \"common/js/config\";\r\nimport { mapActions, mapGetters } from \"vuex\";\r\n\r\nexport default {\r\n  mixins: [playlistMixin],\r\n  components: {\r\n    SearchBox,\r\n    Suggest,\r\n    SearchList,\r\n    Confirm\r\n  },\r\n  data() {\r\n    return {\r\n      hotKey: [],\r\n      newQuery: \"\"\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapGetters([\"searchHistory\"]),\r\n    shortCut() {\r\n      return this.hotKey.concat(this.searchHistory);\r\n    }\r\n  },\r\n  created() {\r\n    this._getHotKey();\r\n  },\r\n  methods: {\r\n    deleteAll() {\r\n      this.$refs.confirm.show();\r\n    },\r\n    handlePlaylist(playlist) {\r\n      const bottom = playlist.length > 0 ? \"60px\" : 0;\r\n      this.$refs[\"shortcut-wrapper\"].style.bottom = bottom;\r\n      this.$refs.scroll.refresh();\r\n      this.$refs[\"suggest-scroll\"].style.bottom = bottom;\r\n      this.$refs.suggest.refresh();\r\n    },\r\n    saveSearch() {\r\n      this.saveSearchHistory(this.newQuery);\r\n    },\r\n    query(newQuery) {\r\n      this.newQuery = newQuery;\r\n    },\r\n    scrollList() {\r\n      this.$refs.searchBox.blur();\r\n    },\r\n    _getHotKey() {\r\n      getHotKey().then(res => {\r\n        if (res.data.code === ERR_OK) {\r\n          this.hotKey = res.data.result.hots;\r\n        }\r\n      });\r\n    },\r\n    addQuery(query) {\r\n      this.$refs.searchBox.setQuery(query);\r\n    },\r\n    ...mapActions([\r\n      \"saveSearchHistory\",\r\n      \"deleteSearchHistory\",\r\n      \"clearSearchHistory\"\r\n    ])\r\n  },\r\n  watch: {\r\n    newQuery(query) {\r\n      if (!query) {\r\n        setTimeout(() => {\r\n          this.$refs.scroll.refresh();\r\n        }, 20);\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import \"common/scss/variable.scss\";\r\n\r\n.search-enter-active,\r\n.search-leave-active {\r\n  transition: all 0.3s;\r\n}\r\n.search-enter,\r\n.search-leave-to {\r\n  transform: translate3d(100%, 0, 0);\r\n  opacity: 0;\r\n}\r\n.search-box-wrapper {\r\n  position: fixed;\r\n  top: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  left: 0;\r\n  background-color: #fff;\r\n  .shortcut-wrapper {\r\n    position: fixed;\r\n    top: 60px;\r\n    bottom: 0;\r\n    width: 100%;\r\n    .shortcut {\r\n      height: 100%;\r\n      overflow: hidden;\r\n      .hot-key {\r\n        margin: 0 20px 20px;\r\n        .title {\r\n          line-height: 20px;\r\n          margin-bottom: 20px;\r\n          font-size: $font-size-medium;\r\n          color: $color-light;\r\n        }\r\n        .item {\r\n          display: inline-block;\r\n          padding: 5px 10px;\r\n          margin: 0 20px 10px 0;\r\n          border-radius: 6px;\r\n          font-size: $font-size-medium;\r\n          border: 1px solid $color-light;\r\n          color: $color-light;\r\n        }\r\n      }\r\n      .search-history {\r\n        margin: 0 20px;\r\n        color: $color-light;\r\n        font-size: $font-size-medium;\r\n        .search-title {\r\n          display: flex;\r\n          margin-bottom: 20px;\r\n          .title {\r\n            flex: 1;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  .suggest-scroll {\r\n    position: fixed;\r\n    top: 45px;\r\n    bottom: 0;\r\n    width: 100%;\r\n  }\r\n}\r\n</style>\r\n\r\n","import mod from \"-!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js??ref--16-2!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./search.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js??ref--16-2!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./search.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./search.vue?vue&type=template&id=578c1909&scoped=true&\"\nimport script from \"./search.vue?vue&type=script&lang=js&\"\nexport * from \"./search.vue?vue&type=script&lang=js&\"\nimport style0 from \"./search.vue?vue&type=style&index=0&id=578c1909&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"578c1909\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/_mini-css-extract-plugin@0.8.2@mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/_css-loader@1.0.1@css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/_sass-loader@7.3.1@sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./search.vue?vue&type=style&index=0&id=578c1909&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/_mini-css-extract-plugin@0.8.2@mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/_css-loader@1.0.1@css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/_sass-loader@7.3.1@sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./search.vue?vue&type=style&index=0&id=578c1909&lang=scss&scoped=true&\"","import mod from \"-!../../../node_modules/_mini-css-extract-plugin@0.8.2@mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/_css-loader@1.0.1@css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/_sass-loader@7.3.1@sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./search-list.vue?vue&type=style&index=0&id=d09e7c9c&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/_mini-css-extract-plugin@0.8.2@mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/_css-loader@1.0.1@css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/_sass-loader@7.3.1@sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./search-list.vue?vue&type=style&index=0&id=d09e7c9c&lang=scss&scoped=true&\"","export default class Singer {\r\n    constructor({ id, name, img1v1Url }) {\r\n        this.id = id\r\n        this.name = name\r\n        this.img1v1Url = img1v1Url\r\n    }\r\n}","import mod from \"-!../../../node_modules/_mini-css-extract-plugin@0.8.2@mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/_css-loader@1.0.1@css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/_sass-loader@7.3.1@sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./suggest.vue?vue&type=style&index=0&id=bc8d2b06&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/_mini-css-extract-plugin@0.8.2@mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/_css-loader@1.0.1@css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/_sass-loader@7.3.1@sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./suggest.vue?vue&type=style&index=0&id=bc8d2b06&lang=scss&scoped=true&\"","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","import { getLyric } from \"api/song\";\r\nimport { ERR_OK } from \"common/js/config\";\r\n\r\nexport default class Song {\r\n  constructor({ singer, alId, alPicUrl, alName, alia, songName, songId }) {\r\n    this.singer = singer;\r\n    this.alId = alId;\r\n    this.alPicUrl = alPicUrl;\r\n    this.alName = alName;\r\n    this.alia = alia;\r\n    this.songName = songName;\r\n    this.songId = songId;\r\n  }\r\n\r\n  getLyric() {\r\n    if (this.lyric) {\r\n      return Promise.resolve(this.lyric);\r\n    }\r\n\r\n    return new Promise((resolve, reject) => {\r\n      getLyric(this.songId).then(res => {\r\n        if (res.data.code === ERR_OK) {\r\n          this.lyric = res.data.lrc.lyric;\r\n          resolve(this.lyric);\r\n        } else {\r\n          reject(\"no lyric\");\r\n        }\r\n      });\r\n    });\r\n  }\r\n}\r\n\r\nexport function createSong(musicData) {\r\n  return new Song({\r\n    singer: filterSinger(musicData.ar),\r\n    alId: musicData.al.id,\r\n    alPicUrl: musicData.al.picUrl,\r\n    alName: musicData.al.name,\r\n    alia: filterAlia(musicData.alia),\r\n    songName: musicData.name,\r\n    songId: musicData.privilege.id\r\n  });\r\n}\r\n\r\nexport function createPlaylistSong(playlist) {\r\n  return new Song({\r\n    singer: filterSinger(playlist.ar),\r\n    alId: playlist.al.id,\r\n    alPicUrl: playlist.al.picUrl,\r\n    alName: playlist.al.name,\r\n    alia: filterAlia(playlist.alia),\r\n    songName: playlist.name,\r\n    songId: playlist.id\r\n  });\r\n}\r\n\r\nexport function createSearchSong(musicData) {\r\n  return new Song({\r\n    singer: filterSinger(musicData.artists),\r\n    alId: musicData.album.id,\r\n    alPicUrl: musicData.album.picUrl,\r\n    alName: musicData.album.name,\r\n    alia: filterAlia(musicData.alias),\r\n    songName: musicData.name,\r\n    songId: musicData.id\r\n  });\r\n}\r\n\r\nfunction filterSinger(ar) {\r\n  let ret = [];\r\n  if (!ar) {\r\n    return \"\";\r\n  }\r\n  ar.forEach(arItem => {\r\n    ret.push(arItem.name);\r\n  });\r\n  return ret.join(\"/\");\r\n}\r\n\r\nfunction filterAlia(alia) {\r\n  let ret = [];\r\n  if (!alia) {\r\n    return \"\";\r\n  }\r\n  alia.forEach(element => {\r\n    ret.push(element);\r\n  });\r\n  return ret.join(\"/\");\r\n}\r\n","import mod from \"-!../../../node_modules/_mini-css-extract-plugin@0.8.2@mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/_css-loader@1.0.1@css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/_sass-loader@7.3.1@sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./search-box.vue?vue&type=style&index=0&id=f1b0b2ec&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/_mini-css-extract-plugin@0.8.2@mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/_css-loader@1.0.1@css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/_sass-loader@7.3.1@sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./search-box.vue?vue&type=style&index=0&id=f1b0b2ec&lang=scss&scoped=true&\""],"sourceRoot":""}