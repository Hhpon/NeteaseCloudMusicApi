{"version":3,"sources":["webpack:///./src/base/song-list/song-list.vue?0b99","webpack:///./src/components/music-list/music-list.vue?68ed","webpack:///src/components/music-list/music-list.vue","webpack:///./src/components/music-list/music-list.vue?1766","webpack:///./src/components/music-list/music-list.vue","webpack:///./src/components/singer-detail/singer-detail.vue?ae06","webpack:///src/components/singer-detail/singer-detail.vue","webpack:///./src/components/singer-detail/singer-detail.vue?5f13","webpack:///./src/components/singer-detail/singer-detail.vue","webpack:///./src/components/music-list/music-list.vue?d843","webpack:///./src/base/song-list/song-list.vue?7a80","webpack:///src/base/song-list/song-list.vue","webpack:///./src/base/song-list/song-list.vue?a7b0","webpack:///./src/base/song-list/song-list.vue","webpack:///./node_modules/_@babel_runtime@7.11.2@@babel/runtime/helpers/esm/createClass.js","webpack:///./src/common/js/song.js","webpack:///./src/components/singer-detail/singer-detail.vue?148a"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","on","back","attrs","ref","_v","_s","headerTitle","style","scrollEvents","options","songs","scroll","selectItem","random","staticRenderFns","mixins","props","type","Array","default","bgImage","String","title","data","scrollY","computed","bgStyle","created","probeType","mounted","imageHeight","$refs","clientHeight","RADIUS_HEIGHT","minTranslateY","RESERVED_HEIGHT","list","top","methods","handlePlaylist","bottom","scrollList","refresh","selectPlay","index","$router","pos","y","randomPlay","watch","layer","newY","scale","percent","blur","Math","min","filter","backdrop","zIndex","paddingTop","height","transform","components","songList","component","MusicList","singer","name","img1v1Url","_getDetail","id","res","code","push","_normalizeSongs","forEach","musicData","privilege","al","ret","length","_l","song","key","$event","getSongName","directives","rawName","value","expression","$emit","item","alia","songName","_defineProperties","target","i","descriptor","enumerable","configurable","writable","Object","defineProperty","_createClass","Constructor","protoProps","staticProps","prototype","Song","alId","alPicUrl","alName","songId","lyric","Promise","resolve","reject","getLyric","then","ERR_OK","lrc","createSong","filterSinger","ar","picUrl","filterAlia","createPlaylistSong","playlist","createSearchSong","artists","album","alias","arItem","join","element"],"mappings":"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","file":"js/chunk-6232c8f0.6ccedbe8.js","sourcesContent":["import mod from \"-!../../../node_modules/_mini-css-extract-plugin@0.8.2@mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/_css-loader@1.0.1@css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/_sass-loader@7.3.1@sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./song-list.vue?vue&type=style&index=0&id=0c426018&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/_mini-css-extract-plugin@0.8.2@mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/_css-loader@1.0.1@css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/_sass-loader@7.3.1@sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./song-list.vue?vue&type=style&index=0&id=0c426018&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"music-list\"},[_c('div',{staticClass:\"back\",on:{\"click\":_vm.back}},[_c('svg',{staticClass:\"icon icon-right\",attrs:{\"aria-hidden\":\"true\"}},[_c('use',{attrs:{\"xlink:href\":\"#icon-right\"}})]),_c('h1',{ref:\"title\",staticClass:\"header-title\"},[_vm._v(_vm._s(_vm.headerTitle))])]),_c('div',{ref:\"bgImage\",staticClass:\"bg-image\",style:(_vm.bgStyle)},[_c('div',{ref:\"filter\",staticClass:\"filter\"})]),_c('div',{ref:\"layer\",staticClass:\"bg-layer\"}),_c('div',{ref:\"list\",staticClass:\"list\"},[_c('cube-scroll',{ref:\"scrollList\",staticClass:\"scroll-list\",attrs:{\"scroll-events\":_vm.scrollEvents,\"options\":_vm.options,\"data\":_vm.songs},on:{\"scroll\":_vm.scroll}},[_c('song-list',{attrs:{\"songs\":_vm.songs},on:{\"select\":_vm.selectItem,\"random\":_vm.random}})],1)],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"music-list\">\r\n    <div class=\"back\" @click=\"back\">\r\n      <svg class=\"icon icon-right\" aria-hidden=\"true\">\r\n        <use xlink:href=\"#icon-right\"></use>\r\n      </svg>\r\n      <h1 class=\"header-title\" ref=\"title\">{{headerTitle}}</h1>\r\n    </div>\r\n    <div class=\"bg-image\" :style=\"bgStyle\" ref=\"bgImage\">\r\n      <div class=\"filter\" ref=\"filter\"></div>\r\n    </div>\r\n    <div class=\"bg-layer\" ref=\"layer\"></div>\r\n    <div class=\"list\" ref=\"list\">\r\n      <cube-scroll\r\n        class=\"scroll-list\"\r\n        ref=\"scrollList\"\r\n        @scroll=\"scroll\"\r\n        :scroll-events=\"scrollEvents\"\r\n        :options=\"options\"\r\n        :data=\"songs\"\r\n      >\r\n        <song-list @select=\"selectItem\" @random=\"random\" :songs=\"songs\"></song-list>\r\n      </cube-scroll>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport songList from \"base/song-list/song-list\";\r\nimport { prefixStyle } from \"common/js/dom\";\r\nimport { mapActions } from \"vuex\";\r\nimport { playlistMixin } from \"common/js/mixin\";\r\n\r\nconst RESERVED_HEIGHT = 40;\r\nconst RADIUS_HEIGHT = 10;\r\nconst transform = prefixStyle(\"transform\");\r\nconst backdrop = prefixStyle(\"backdrop-filter\");\r\n\r\nexport default {\r\n  mixins: [playlistMixin],\r\n  props: {\r\n    songs: {\r\n      type: Array,\r\n      default: () => []\r\n    },\r\n    bgImage: {\r\n      type: String,\r\n      default: \"\"\r\n    },\r\n    title: {\r\n      type: String,\r\n      default: \"\"\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      scrollY: 0,\r\n      headerTitle: \"\"\r\n    };\r\n  },\r\n  computed: {\r\n    bgStyle() {\r\n      return `background-image: url(${this.bgImage})`;\r\n    }\r\n  },\r\n  created() {\r\n    this.options = {\r\n      probeType: 3\r\n    };\r\n    this.scrollEvents = [\"scroll\"];\r\n  },\r\n  mounted() {\r\n    this.imageHeight = this.$refs.bgImage.clientHeight - RADIUS_HEIGHT;\r\n    this.minTranslateY = -this.imageHeight + RESERVED_HEIGHT;\r\n    this.$refs.list.style.top = `${this.imageHeight}px`;\r\n  },\r\n  methods: {\r\n    handlePlaylist(playlist) {\r\n      const bottom = playlist.length > 0 ? \"60px\" : \"\";\r\n      this.$refs.list.style.bottom = bottom;\r\n      this.$refs.scrollList.refresh();\r\n    },\r\n    selectItem(item, index) {\r\n      // 子组件只是把应该返回的数据返回回来，而不是看父组件使用什么\r\n      this.selectPlay({\r\n        list: this.songs,\r\n        index\r\n      });\r\n    },\r\n    back() {\r\n      this.$router.back();\r\n    },\r\n    scroll(pos) {\r\n      this.scrollY = pos.y;\r\n    },\r\n    random() {\r\n      this.randomPlay({ list: this.songs });\r\n    },\r\n    ...mapActions([\"selectPlay\", \"randomPlay\"])\r\n  },\r\n  watch: {\r\n    scrollY(newY) {\r\n      let translateY = Math.max(this.minTranslateY, newY);\r\n      let zIndex = 0;\r\n      let scale = 1;\r\n      let blur = 0;\r\n      this.$refs.layer.style[\"transform\"] = `translate3d(0,${translateY}px,0)`;\r\n      const percent = Math.abs(newY / this.imageHeight);\r\n      if (newY > 0) {\r\n        scale = 1 + percent;\r\n      } else {\r\n        blur = Math.min(20 * percent, 20);\r\n      }\r\n      this.$refs.filter.style[backdrop] = `blur(${blur}px)`;\r\n      if (newY < this.minTranslateY) {\r\n        zIndex = 10;\r\n        this.$refs.bgImage.style.paddingTop = 0;\r\n        this.$refs.bgImage.style.height = `${RESERVED_HEIGHT}px`;\r\n        this.headerTitle = this.title;\r\n      } else {\r\n        zIndex = 0;\r\n        this.$refs.bgImage.style.paddingTop = \"70%\";\r\n        this.$refs.bgImage.style.height = 0;\r\n        this.headerTitle = \"\";\r\n      }\r\n      this.$refs.bgImage.style.zIndex = zIndex;\r\n      this.$refs.bgImage.style[transform] = `scale(${scale})`;\r\n    }\r\n  },\r\n  components: {\r\n    songList\r\n  }\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.music-list {\r\n  position: fixed;\r\n  z-index: 100;\r\n  top: 0;\r\n  right: 0;\r\n  bottom: 0px;\r\n  left: 0;\r\n  background-color: #fff;\r\n  .back {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    color: #fff;\r\n    z-index: 50;\r\n    display: flex;\r\n    .icon-right {\r\n      padding: 10px;\r\n    }\r\n    .header-title {\r\n      padding-top: 10px;\r\n    }\r\n  }\r\n  .bg-image {\r\n    position: relative;\r\n    width: 100%;\r\n    height: 0;\r\n    padding-top: 70%;\r\n    transform-origin: top;\r\n    background-size: cover;\r\n    .filter {\r\n      position: absolute;\r\n      top: 0;\r\n      left: 0;\r\n      height: 100%;\r\n      width: 100%;\r\n      background-color: rgba(0, 0, 0, 0.3);\r\n    }\r\n  }\r\n  .bg-layer {\r\n    position: relative;\r\n    height: 100%;\r\n    background-color: #fff;\r\n  }\r\n  .list {\r\n    position: fixed;\r\n    top: 0;\r\n    bottom: 0;\r\n    width: 100%;\r\n    .scroll-list {\r\n      overflow: visible;\r\n    }\r\n  }\r\n}\r\n</style>\r\n\r\n\r\n","import mod from \"-!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js??ref--16-2!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./music-list.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js??ref--16-2!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./music-list.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./music-list.vue?vue&type=template&id=339323bd&scoped=true&\"\nimport script from \"./music-list.vue?vue&type=script&lang=js&\"\nexport * from \"./music-list.vue?vue&type=script&lang=js&\"\nimport style0 from \"./music-list.vue?vue&type=style&index=0&id=339323bd&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"339323bd\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('transition',{attrs:{\"name\":\"slide\"}},[_c('music-list',{attrs:{\"songs\":_vm.songs,\"bg-image\":_vm.bgImage,\"title\":_vm.title}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <transition name=\"slide\">\r\n    <music-list :songs=\"songs\" :bg-image=\"bgImage\" :title=\"title\"></music-list>\r\n  </transition>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters } from \"vuex\";\r\nimport { getSingerDetail } from \"api/singer\";\r\nimport { ERR_OK } from \"common/js/config\";\r\nimport { createSong } from \"common/js/song\";\r\nimport MusicList from \"components/music-list/music-list\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      songs: []\r\n    };\r\n  },\r\n  components: {\r\n    MusicList\r\n  },\r\n  computed: {\r\n    title() {\r\n      return this.singer.name;\r\n    },\r\n    bgImage() {\r\n      return this.singer.img1v1Url;\r\n    },\r\n    ...mapGetters([\"singer\"])\r\n  },\r\n  created() {\r\n    this._getDetail();\r\n  },\r\n  methods: {\r\n    _getDetail() {\r\n      if (!this.singer.id) {\r\n        this.$router.push(\"/singer\");\r\n        return;\r\n      }\r\n      getSingerDetail(this.singer.id).then(res => {\r\n        if (res.code === ERR_OK) {\r\n          this.songs = this._normalizeSongs(res.hotSongs);\r\n        }\r\n      });\r\n    },\r\n    _normalizeSongs(list) {\r\n      let ret = [];\r\n      list.forEach(item => {\r\n        let musicData = item;\r\n        if (musicData.privilege.id && musicData.al.id) {\r\n          ret.push(createSong(musicData));\r\n        }\r\n      });\r\n      return ret;\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import \"common/scss/variable.scss\";\r\n\r\n.slide-enter-active,\r\n.slide-leave-active {\r\n  transition: all 0.3s;\r\n}\r\n.slide-enter,\r\n.slide-leave-to {\r\n  transform: translate3d(100%, 0, 0);\r\n  opacity: 0;\r\n}\r\n</style>\r\n\r\n","import mod from \"-!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js??ref--16-2!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./singer-detail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js??ref--16-2!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./singer-detail.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./singer-detail.vue?vue&type=template&id=4c6f5734&scoped=true&\"\nimport script from \"./singer-detail.vue?vue&type=script&lang=js&\"\nexport * from \"./singer-detail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./singer-detail.vue?vue&type=style&index=0&id=4c6f5734&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4c6f5734\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/_mini-css-extract-plugin@0.8.2@mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/_css-loader@1.0.1@css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/_sass-loader@7.3.1@sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./music-list.vue?vue&type=style&index=0&id=339323bd&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/_mini-css-extract-plugin@0.8.2@mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/_css-loader@1.0.1@css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/_sass-loader@7.3.1@sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./music-list.vue?vue&type=style&index=0&id=339323bd&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"song-list\"},[_c('div',{staticClass:\"button\",on:{\"click\":_vm.random}},[_c('svg',{staticClass:\"icon icon-play\",attrs:{\"aria-hidden\":\"true\"}},[_c('use',{attrs:{\"xlink:href\":\"#icon-zanting\"}})]),_c('div',{staticClass:\"button-desc\"},[_vm._v(\"\\n      播放全部\\n      \"),_c('span',{staticClass:\"button-desc-count\"},[_vm._v(\"(共\"+_vm._s(_vm.songs.length)+\"首)\")])])]),_c('ul',_vm._l((_vm.songs),function(song,index){return _c('li',{key:index,staticClass:\"item\",on:{\"click\":function($event){return _vm.selectItem(song,index)}}},[_c('div',{staticClass:\"num\"},[_vm._v(_vm._s(index+1))]),_c('div',{staticClass:\"content\"},[_c('h2',{staticClass:\"name\"},[_vm._v(_vm._s(_vm.getSongName(song)))]),_c('div',{staticClass:\"singer\"},[_vm._v(_vm._s(song.singer))])])])}),0),_c('cube-loading',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.songs.length),expression:\"!songs.length\"}],staticClass:\"loading_container\",attrs:{\"size\":40}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"song-list\">\r\n    <div class=\"button\" @click=\"random\">\r\n      <svg class=\"icon icon-play\" aria-hidden=\"true\">\r\n        <use xlink:href=\"#icon-zanting\"></use>\r\n      </svg>\r\n      <div class=\"button-desc\">\r\n        播放全部\r\n        <span class=\"button-desc-count\">(共{{songs.length}}首)</span>\r\n      </div>\r\n    </div>\r\n    <ul>\r\n      <li @click=\"selectItem(song,index)\" v-for=\"(song, index) in songs\" :key=\"index\" class=\"item\">\r\n        <div class=\"num\">{{index+1}}</div>\r\n        <div class=\"content\">\r\n          <h2 class=\"name\">{{getSongName(song)}}</h2>\r\n          <div class=\"singer\">{{song.singer}}</div>\r\n        </div>\r\n      </li>\r\n    </ul>\r\n    <cube-loading :size=\"40\" class=\"loading_container\" v-show=\"!songs.length\"></cube-loading>\r\n  </div>\r\n</template>\r\n<script>\r\nexport default {\r\n  props: {\r\n    songs: {\r\n      type: Array,\r\n      default: () => []\r\n    }\r\n  },\r\n  methods: {\r\n    selectItem(item, index) {\r\n      // 本组件为基础组件，所以不去写任何逻辑，只派发这个事件，只告诉外面的父组件，这个东西被点击了，以及点击的是什么东西\r\n      this.$emit(\"select\", item, index);\r\n    },\r\n    getSongName(song) {\r\n      if (song.alia) {\r\n        return `${song.songName}(${song.alia})`;\r\n      }\r\n      return song.songName;\r\n    },\r\n    random() {\r\n      this.$emit(\"random\");\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n@import \"common/scss/variable.scss\";\r\n@import \"common/scss/mixin.scss\";\r\n\r\n.song-list {\r\n  background-color: #fff;\r\n  border-radius: 10px 10px 0 0;\r\n  .button {\r\n    display: flex;\r\n    height: 40px;\r\n    width: 100%;\r\n    align-items: center;\r\n    border-bottom: 1px solid $color-border;\r\n    .icon-play {\r\n      font-size: $font-size-large-x;\r\n      width: 40px;\r\n      text-align: center;\r\n    }\r\n    .button-desc {\r\n      .button-desc-count {\r\n        color: $color-light;\r\n        font-size: 14px;\r\n      }\r\n    }\r\n  }\r\n  .item {\r\n    display: flex;\r\n    height: 64px;\r\n    align-items: center;\r\n    border-bottom: 1px solid $color-border;\r\n    .num {\r\n      width: 40px;\r\n      text-align: center;\r\n      flex: 0 0 40px;\r\n      color: $color-light;\r\n    }\r\n    .content {\r\n      flex: 1 1 0%;\r\n      line-height: 20px;\r\n      overflow: hidden;\r\n      .name {\r\n        width: 90%;\r\n        @include no-row;\r\n      }\r\n      .singer {\r\n        width: 90%;\r\n        font-size: $font-size-small;\r\n        color: $color-light;\r\n        padding-top: 5px;\r\n        @include no-row;\r\n      }\r\n    }\r\n  }\r\n  .loading_container {\r\n    display: flex;\r\n    justify-content: center;\r\n    padding-top: 100px;\r\n  }\r\n}\r\n</style>\r\n\r\n","import mod from \"-!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js??ref--16-2!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./song-list.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js??ref--16-2!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./song-list.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./song-list.vue?vue&type=template&id=0c426018&scoped=true&\"\nimport script from \"./song-list.vue?vue&type=script&lang=js&\"\nexport * from \"./song-list.vue?vue&type=script&lang=js&\"\nimport style0 from \"./song-list.vue?vue&type=style&index=0&id=0c426018&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0c426018\",\n  null\n  \n)\n\nexport default component.exports","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","import { getLyric } from \"api/song\";\r\nimport { ERR_OK } from \"common/js/config\";\r\n\r\nexport default class Song {\r\n  constructor({ singer, alId, alPicUrl, alName, alia, songName, songId }) {\r\n    this.singer = singer;\r\n    this.alId = alId;\r\n    this.alPicUrl = alPicUrl;\r\n    this.alName = alName;\r\n    this.alia = alia;\r\n    this.songName = songName;\r\n    this.songId = songId;\r\n  }\r\n\r\n  getLyric() {\r\n    if (this.lyric) {\r\n      return Promise.resolve(this.lyric);\r\n    }\r\n\r\n    return new Promise((resolve, reject) => {\r\n      getLyric(this.songId).then(res => {\r\n        if (res.data.code === ERR_OK) {\r\n          this.lyric = res.data.lrc.lyric;\r\n          resolve(this.lyric);\r\n        } else {\r\n          reject(\"no lyric\");\r\n        }\r\n      });\r\n    });\r\n  }\r\n}\r\n\r\nexport function createSong(musicData) {\r\n  return new Song({\r\n    singer: filterSinger(musicData.ar),\r\n    alId: musicData.al.id,\r\n    alPicUrl: musicData.al.picUrl,\r\n    alName: musicData.al.name,\r\n    alia: filterAlia(musicData.alia),\r\n    songName: musicData.name,\r\n    songId: musicData.privilege.id\r\n  });\r\n}\r\n\r\nexport function createPlaylistSong(playlist) {\r\n  return new Song({\r\n    singer: filterSinger(playlist.ar),\r\n    alId: playlist.al.id,\r\n    alPicUrl: playlist.al.picUrl,\r\n    alName: playlist.al.name,\r\n    alia: filterAlia(playlist.alia),\r\n    songName: playlist.name,\r\n    songId: playlist.id\r\n  });\r\n}\r\n\r\nexport function createSearchSong(musicData) {\r\n  return new Song({\r\n    singer: filterSinger(musicData.artists),\r\n    alId: musicData.album.id,\r\n    alPicUrl: musicData.album.picUrl,\r\n    alName: musicData.album.name,\r\n    alia: filterAlia(musicData.alias),\r\n    songName: musicData.name,\r\n    songId: musicData.id\r\n  });\r\n}\r\n\r\nfunction filterSinger(ar) {\r\n  let ret = [];\r\n  if (!ar) {\r\n    return \"\";\r\n  }\r\n  ar.forEach(arItem => {\r\n    ret.push(arItem.name);\r\n  });\r\n  return ret.join(\"/\");\r\n}\r\n\r\nfunction filterAlia(alia) {\r\n  let ret = [];\r\n  if (!alia) {\r\n    return \"\";\r\n  }\r\n  alia.forEach(element => {\r\n    ret.push(element);\r\n  });\r\n  return ret.join(\"/\");\r\n}\r\n","import mod from \"-!../../../node_modules/_mini-css-extract-plugin@0.8.2@mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/_css-loader@1.0.1@css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/_sass-loader@7.3.1@sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./singer-detail.vue?vue&type=style&index=0&id=4c6f5734&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/_mini-css-extract-plugin@0.8.2@mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/_css-loader@1.0.1@css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/_sass-loader@7.3.1@sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./singer-detail.vue?vue&type=style&index=0&id=4c6f5734&lang=scss&scoped=true&\""],"sourceRoot":""}