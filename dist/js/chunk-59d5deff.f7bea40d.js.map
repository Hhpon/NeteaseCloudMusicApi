{"version":3,"sources":["webpack:///./node_modules/_@babel_runtime@7.11.2@@babel/runtime/helpers/esm/classCallCheck.js","webpack:///./src/base/song-list/song-list.vue?0b99","webpack:///./src/components/music-list/music-list.vue?68ed","webpack:///src/components/music-list/music-list.vue","webpack:///./src/components/music-list/music-list.vue?1766","webpack:///./src/components/music-list/music-list.vue","webpack:///./src/components/disc/disc.vue?53f9","webpack:///./src/components/music-list/music-list.vue?d843","webpack:///./src/base/song-list/song-list.vue?7a80","webpack:///src/base/song-list/song-list.vue","webpack:///./src/base/song-list/song-list.vue?a7b0","webpack:///./src/base/song-list/song-list.vue","webpack:///./src/components/disc/disc.vue?fc2c","webpack:///src/components/disc/disc.vue","webpack:///./src/components/disc/disc.vue?c539","webpack:///./src/components/disc/disc.vue","webpack:///./node_modules/_@babel_runtime@7.11.2@@babel/runtime/helpers/esm/createClass.js","webpack:///./src/common/js/song.js"],"names":["_classCallCheck","instance","Constructor","TypeError","render","_vm","this","_h","$createElement","_c","_self","staticClass","on","back","attrs","ref","_v","_s","headerTitle","style","scrollEvents","options","songs","scroll","selectItem","random","staticRenderFns","mixins","props","type","Array","default","bgImage","String","title","data","scrollY","computed","bgStyle","created","probeType","mounted","imageHeight","$refs","clientHeight","RADIUS_HEIGHT","minTranslateY","RESERVED_HEIGHT","list","top","methods","handlePlaylist","bottom","scrollList","refresh","selectPlay","index","$router","pos","y","randomPlay","watch","layer","newY","scale","percent","blur","Math","min","filter","backdrop","zIndex","paddingTop","height","transform","components","songList","component","length","_l","song","key","$event","getSongName","singer","directives","name","rawName","value","expression","$emit","item","alia","songName","disc","picUrl","coverImgUrl","MusicList","_getDetail","id","push","_normalizeSongs","forEach","musicData","al","ret","_defineProperties","target","i","descriptor","enumerable","configurable","writable","Object","defineProperty","_createClass","protoProps","staticProps","prototype","Song","alId","alPicUrl","alName","songId","lyric","Promise","resolve","reject","getLyric","then","res","code","ERR_OK","lrc","createSong","filterSinger","ar","filterAlia","privilege","createPlaylistSong","playlist","createSearchSong","artists","album","alias","arItem","join","element"],"mappings":"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","file":"js/chunk-59d5deff.f7bea40d.js","sourcesContent":["export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","import mod from \"-!../../../node_modules/_mini-css-extract-plugin@0.8.2@mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/_css-loader@1.0.1@css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/_sass-loader@7.3.1@sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./song-list.vue?vue&type=style&index=0&id=0c426018&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/_mini-css-extract-plugin@0.8.2@mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/_css-loader@1.0.1@css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/_sass-loader@7.3.1@sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./song-list.vue?vue&type=style&index=0&id=0c426018&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"music-list\"},[_c('div',{staticClass:\"back\",on:{\"click\":_vm.back}},[_c('svg',{staticClass:\"icon icon-right\",attrs:{\"aria-hidden\":\"true\"}},[_c('use',{attrs:{\"xlink:href\":\"#icon-right\"}})]),_c('h1',{ref:\"title\",staticClass:\"header-title\"},[_vm._v(_vm._s(_vm.headerTitle))])]),_c('div',{ref:\"bgImage\",staticClass:\"bg-image\",style:(_vm.bgStyle)},[_c('div',{ref:\"filter\",staticClass:\"filter\"})]),_c('div',{ref:\"layer\",staticClass:\"bg-layer\"}),_c('div',{ref:\"list\",staticClass:\"list\"},[_c('cube-scroll',{ref:\"scrollList\",staticClass:\"scroll-list\",attrs:{\"scroll-events\":_vm.scrollEvents,\"options\":_vm.options,\"data\":_vm.songs},on:{\"scroll\":_vm.scroll}},[_c('song-list',{attrs:{\"songs\":_vm.songs},on:{\"select\":_vm.selectItem,\"random\":_vm.random}})],1)],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"music-list\">\r\n    <div class=\"back\" @click=\"back\">\r\n      <svg class=\"icon icon-right\" aria-hidden=\"true\">\r\n        <use xlink:href=\"#icon-right\"></use>\r\n      </svg>\r\n      <h1 class=\"header-title\" ref=\"title\">{{headerTitle}}</h1>\r\n    </div>\r\n    <div class=\"bg-image\" :style=\"bgStyle\" ref=\"bgImage\">\r\n      <div class=\"filter\" ref=\"filter\"></div>\r\n    </div>\r\n    <div class=\"bg-layer\" ref=\"layer\"></div>\r\n    <div class=\"list\" ref=\"list\">\r\n      <cube-scroll\r\n        class=\"scroll-list\"\r\n        ref=\"scrollList\"\r\n        @scroll=\"scroll\"\r\n        :scroll-events=\"scrollEvents\"\r\n        :options=\"options\"\r\n        :data=\"songs\"\r\n      >\r\n        <song-list @select=\"selectItem\" @random=\"random\" :songs=\"songs\"></song-list>\r\n      </cube-scroll>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport songList from \"base/song-list/song-list\";\r\nimport { prefixStyle } from \"common/js/dom\";\r\nimport { mapActions } from \"vuex\";\r\nimport { playlistMixin } from \"common/js/mixin\";\r\n\r\nconst RESERVED_HEIGHT = 40;\r\nconst RADIUS_HEIGHT = 10;\r\nconst transform = prefixStyle(\"transform\");\r\nconst backdrop = prefixStyle(\"backdrop-filter\");\r\n\r\nexport default {\r\n  mixins: [playlistMixin],\r\n  props: {\r\n    songs: {\r\n      type: Array,\r\n      default: () => []\r\n    },\r\n    bgImage: {\r\n      type: String,\r\n      default: \"\"\r\n    },\r\n    title: {\r\n      type: String,\r\n      default: \"\"\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      scrollY: 0,\r\n      headerTitle: \"\"\r\n    };\r\n  },\r\n  computed: {\r\n    bgStyle() {\r\n      return `background-image: url(${this.bgImage})`;\r\n    }\r\n  },\r\n  created() {\r\n    this.options = {\r\n      probeType: 3\r\n    };\r\n    this.scrollEvents = [\"scroll\"];\r\n  },\r\n  mounted() {\r\n    this.imageHeight = this.$refs.bgImage.clientHeight - RADIUS_HEIGHT;\r\n    this.minTranslateY = -this.imageHeight + RESERVED_HEIGHT;\r\n    this.$refs.list.style.top = `${this.imageHeight}px`;\r\n  },\r\n  methods: {\r\n    handlePlaylist(playlist) {\r\n      const bottom = playlist.length > 0 ? \"60px\" : \"\";\r\n      this.$refs.list.style.bottom = bottom;\r\n      this.$refs.scrollList.refresh();\r\n    },\r\n    selectItem(item, index) {\r\n      // 子组件只是把应该返回的数据返回回来，而不是看父组件使用什么\r\n      this.selectPlay({\r\n        list: this.songs,\r\n        index\r\n      });\r\n    },\r\n    back() {\r\n      this.$router.back();\r\n    },\r\n    scroll(pos) {\r\n      this.scrollY = pos.y;\r\n    },\r\n    random() {\r\n      this.randomPlay({ list: this.songs });\r\n    },\r\n    ...mapActions([\"selectPlay\", \"randomPlay\"])\r\n  },\r\n  watch: {\r\n    scrollY(newY) {\r\n      let translateY = Math.max(this.minTranslateY, newY);\r\n      let zIndex = 0;\r\n      let scale = 1;\r\n      let blur = 0;\r\n      this.$refs.layer.style[\"transform\"] = `translate3d(0,${translateY}px,0)`;\r\n      const percent = Math.abs(newY / this.imageHeight);\r\n      if (newY > 0) {\r\n        scale = 1 + percent;\r\n      } else {\r\n        blur = Math.min(20 * percent, 20);\r\n      }\r\n      this.$refs.filter.style[backdrop] = `blur(${blur}px)`;\r\n      if (newY < this.minTranslateY) {\r\n        zIndex = 10;\r\n        this.$refs.bgImage.style.paddingTop = 0;\r\n        this.$refs.bgImage.style.height = `${RESERVED_HEIGHT}px`;\r\n        this.headerTitle = this.title;\r\n      } else {\r\n        zIndex = 0;\r\n        this.$refs.bgImage.style.paddingTop = \"70%\";\r\n        this.$refs.bgImage.style.height = 0;\r\n        this.headerTitle = \"\";\r\n      }\r\n      this.$refs.bgImage.style.zIndex = zIndex;\r\n      this.$refs.bgImage.style[transform] = `scale(${scale})`;\r\n    }\r\n  },\r\n  components: {\r\n    songList\r\n  }\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.music-list {\r\n  position: fixed;\r\n  z-index: 100;\r\n  top: 0;\r\n  right: 0;\r\n  bottom: 0px;\r\n  left: 0;\r\n  background-color: #fff;\r\n  .back {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    color: #fff;\r\n    z-index: 50;\r\n    display: flex;\r\n    .icon-right {\r\n      padding: 10px;\r\n    }\r\n    .header-title {\r\n      padding-top: 10px;\r\n    }\r\n  }\r\n  .bg-image {\r\n    position: relative;\r\n    width: 100%;\r\n    height: 0;\r\n    padding-top: 70%;\r\n    transform-origin: top;\r\n    background-size: cover;\r\n    .filter {\r\n      position: absolute;\r\n      top: 0;\r\n      left: 0;\r\n      height: 100%;\r\n      width: 100%;\r\n      background-color: rgba(0, 0, 0, 0.3);\r\n    }\r\n  }\r\n  .bg-layer {\r\n    position: relative;\r\n    height: 100%;\r\n    background-color: #fff;\r\n  }\r\n  .list {\r\n    position: fixed;\r\n    top: 0;\r\n    bottom: 0;\r\n    width: 100%;\r\n    .scroll-list {\r\n      overflow: visible;\r\n    }\r\n  }\r\n}\r\n</style>\r\n\r\n\r\n","import mod from \"-!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js??ref--16-2!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./music-list.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js??ref--16-2!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./music-list.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./music-list.vue?vue&type=template&id=339323bd&scoped=true&\"\nimport script from \"./music-list.vue?vue&type=script&lang=js&\"\nexport * from \"./music-list.vue?vue&type=script&lang=js&\"\nimport style0 from \"./music-list.vue?vue&type=style&index=0&id=339323bd&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"339323bd\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/_mini-css-extract-plugin@0.8.2@mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/_css-loader@1.0.1@css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/_sass-loader@7.3.1@sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./disc.vue?vue&type=style&index=0&id=7ba0750b&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/_mini-css-extract-plugin@0.8.2@mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/_css-loader@1.0.1@css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/_sass-loader@7.3.1@sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./disc.vue?vue&type=style&index=0&id=7ba0750b&lang=scss&scoped=true&\"","import mod from \"-!../../../node_modules/_mini-css-extract-plugin@0.8.2@mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/_css-loader@1.0.1@css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/_sass-loader@7.3.1@sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./music-list.vue?vue&type=style&index=0&id=339323bd&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/_mini-css-extract-plugin@0.8.2@mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/_css-loader@1.0.1@css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/_sass-loader@7.3.1@sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./music-list.vue?vue&type=style&index=0&id=339323bd&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"song-list\"},[_c('div',{staticClass:\"button\",on:{\"click\":_vm.random}},[_c('svg',{staticClass:\"icon icon-play\",attrs:{\"aria-hidden\":\"true\"}},[_c('use',{attrs:{\"xlink:href\":\"#icon-zanting\"}})]),_c('div',{staticClass:\"button-desc\"},[_vm._v(\"\\n      播放全部\\n      \"),_c('span',{staticClass:\"button-desc-count\"},[_vm._v(\"(共\"+_vm._s(_vm.songs.length)+\"首)\")])])]),_c('ul',_vm._l((_vm.songs),function(song,index){return _c('li',{key:index,staticClass:\"item\",on:{\"click\":function($event){return _vm.selectItem(song,index)}}},[_c('div',{staticClass:\"num\"},[_vm._v(_vm._s(index+1))]),_c('div',{staticClass:\"content\"},[_c('h2',{staticClass:\"name\"},[_vm._v(_vm._s(_vm.getSongName(song)))]),_c('div',{staticClass:\"singer\"},[_vm._v(_vm._s(song.singer))])])])}),0),_c('cube-loading',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.songs.length),expression:\"!songs.length\"}],staticClass:\"loading_container\",attrs:{\"size\":40}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"song-list\">\r\n    <div class=\"button\" @click=\"random\">\r\n      <svg class=\"icon icon-play\" aria-hidden=\"true\">\r\n        <use xlink:href=\"#icon-zanting\"></use>\r\n      </svg>\r\n      <div class=\"button-desc\">\r\n        播放全部\r\n        <span class=\"button-desc-count\">(共{{songs.length}}首)</span>\r\n      </div>\r\n    </div>\r\n    <ul>\r\n      <li @click=\"selectItem(song,index)\" v-for=\"(song, index) in songs\" :key=\"index\" class=\"item\">\r\n        <div class=\"num\">{{index+1}}</div>\r\n        <div class=\"content\">\r\n          <h2 class=\"name\">{{getSongName(song)}}</h2>\r\n          <div class=\"singer\">{{song.singer}}</div>\r\n        </div>\r\n      </li>\r\n    </ul>\r\n    <cube-loading :size=\"40\" class=\"loading_container\" v-show=\"!songs.length\"></cube-loading>\r\n  </div>\r\n</template>\r\n<script>\r\nexport default {\r\n  props: {\r\n    songs: {\r\n      type: Array,\r\n      default: () => []\r\n    }\r\n  },\r\n  methods: {\r\n    selectItem(item, index) {\r\n      // 本组件为基础组件，所以不去写任何逻辑，只派发这个事件，只告诉外面的父组件，这个东西被点击了，以及点击的是什么东西\r\n      this.$emit(\"select\", item, index);\r\n    },\r\n    getSongName(song) {\r\n      if (song.alia) {\r\n        return `${song.songName}(${song.alia})`;\r\n      }\r\n      return song.songName;\r\n    },\r\n    random() {\r\n      this.$emit(\"random\");\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n@import \"common/scss/variable.scss\";\r\n@import \"common/scss/mixin.scss\";\r\n\r\n.song-list {\r\n  background-color: #fff;\r\n  border-radius: 10px 10px 0 0;\r\n  .button {\r\n    display: flex;\r\n    height: 40px;\r\n    width: 100%;\r\n    align-items: center;\r\n    border-bottom: 1px solid $color-border;\r\n    .icon-play {\r\n      font-size: $font-size-large-x;\r\n      width: 40px;\r\n      text-align: center;\r\n    }\r\n    .button-desc {\r\n      .button-desc-count {\r\n        color: $color-light;\r\n        font-size: 14px;\r\n      }\r\n    }\r\n  }\r\n  .item {\r\n    display: flex;\r\n    height: 64px;\r\n    align-items: center;\r\n    border-bottom: 1px solid $color-border;\r\n    .num {\r\n      width: 40px;\r\n      text-align: center;\r\n      flex: 0 0 40px;\r\n      color: $color-light;\r\n    }\r\n    .content {\r\n      flex: 1 1 0%;\r\n      line-height: 20px;\r\n      overflow: hidden;\r\n      .name {\r\n        width: 90%;\r\n        @include no-row;\r\n      }\r\n      .singer {\r\n        width: 90%;\r\n        font-size: $font-size-small;\r\n        color: $color-light;\r\n        padding-top: 5px;\r\n        @include no-row;\r\n      }\r\n    }\r\n  }\r\n  .loading_container {\r\n    display: flex;\r\n    justify-content: center;\r\n    padding-top: 100px;\r\n  }\r\n}\r\n</style>\r\n\r\n","import mod from \"-!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js??ref--16-2!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./song-list.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js??ref--16-2!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./song-list.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./song-list.vue?vue&type=template&id=0c426018&scoped=true&\"\nimport script from \"./song-list.vue?vue&type=script&lang=js&\"\nexport * from \"./song-list.vue?vue&type=script&lang=js&\"\nimport style0 from \"./song-list.vue?vue&type=style&index=0&id=0c426018&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0c426018\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('transition',{attrs:{\"name\":\"slide\"}},[_c('music-list',{attrs:{\"songs\":_vm.songs,\"title\":_vm.title,\"bgImage\":_vm.bgImage}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <transition name=\"slide\">\r\n    <music-list :songs=\"songs\" :title=\"title\" :bgImage=\"bgImage\"></music-list>\r\n  </transition>\r\n</template>\r\n\r\n<script>\r\nimport MusicList from \"components/music-list/music-list\";\r\nimport { mapGetters } from \"vuex\";\r\nimport { getSongDetail } from \"api/song\";\r\nimport { createPlaylistSong } from \"common/js/song\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      songs: []\r\n    };\r\n  },\r\n  computed: {\r\n    title() {\r\n      return this.disc.name;\r\n    },\r\n    bgImage() {\r\n      return this.disc.picUrl || this.disc.coverImgUrl;\r\n    },\r\n    ...mapGetters([\"disc\"])\r\n  },\r\n  components: {\r\n    MusicList\r\n  },\r\n  created() {\r\n    this._getDetail();\r\n  },\r\n  methods: {\r\n    _getDetail() {\r\n      if (!this.disc.id) {\r\n        this.$router.push(\"/recommend\");\r\n        return;\r\n      }\r\n      getSongDetail(this.disc.id).then(res => {\r\n        this.songs = this._normalizeSongs(res);\r\n      });\r\n    },\r\n    _normalizeSongs(list) {\r\n      let ret = [];\r\n      list.forEach(item => {\r\n        let musicData = item;\r\n        if (musicData.id && musicData.al.id) {\r\n          ret.push(createPlaylistSong(musicData));\r\n        }\r\n      });\r\n      return ret;\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.slide-enter-active,\r\n.slide-leave-active {\r\n  transition: all 0.3s;\r\n}\r\n.slide-enter,\r\n.slide-leave-to {\r\n  transform: translate3d(100%, 0, 0);\r\n  opacity: 0;\r\n}\r\n</style>\r\n\r\n\r\n","import mod from \"-!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js??ref--16-2!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./disc.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js??ref--16-2!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./disc.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./disc.vue?vue&type=template&id=7ba0750b&scoped=true&\"\nimport script from \"./disc.vue?vue&type=script&lang=js&\"\nexport * from \"./disc.vue?vue&type=script&lang=js&\"\nimport style0 from \"./disc.vue?vue&type=style&index=0&id=7ba0750b&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7ba0750b\",\n  null\n  \n)\n\nexport default component.exports","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","import { getLyric } from \"api/song\";\r\nimport { ERR_OK } from \"common/js/config\";\r\n\r\nexport default class Song {\r\n  constructor({ singer, alId, alPicUrl, alName, alia, songName, songId }) {\r\n    this.singer = singer;\r\n    this.alId = alId;\r\n    this.alPicUrl = alPicUrl;\r\n    this.alName = alName;\r\n    this.alia = alia;\r\n    this.songName = songName;\r\n    this.songId = songId;\r\n  }\r\n\r\n  getLyric() {\r\n    if (this.lyric) {\r\n      return Promise.resolve(this.lyric);\r\n    }\r\n\r\n    return new Promise((resolve, reject) => {\r\n      getLyric(this.songId).then(res => {\r\n        if (res.data.code === ERR_OK) {\r\n          this.lyric = res.data.lrc.lyric;\r\n          resolve(this.lyric);\r\n        } else {\r\n          reject(\"no lyric\");\r\n        }\r\n      });\r\n    });\r\n  }\r\n}\r\n\r\nexport function createSong(musicData) {\r\n  return new Song({\r\n    singer: filterSinger(musicData.ar),\r\n    alId: musicData.al.id,\r\n    alPicUrl: musicData.al.picUrl,\r\n    alName: musicData.al.name,\r\n    alia: filterAlia(musicData.alia),\r\n    songName: musicData.name,\r\n    songId: musicData.privilege.id\r\n  });\r\n}\r\n\r\nexport function createPlaylistSong(playlist) {\r\n  return new Song({\r\n    singer: filterSinger(playlist.ar),\r\n    alId: playlist.al.id,\r\n    alPicUrl: playlist.al.picUrl,\r\n    alName: playlist.al.name,\r\n    alia: filterAlia(playlist.alia),\r\n    songName: playlist.name,\r\n    songId: playlist.id\r\n  });\r\n}\r\n\r\nexport function createSearchSong(musicData) {\r\n  return new Song({\r\n    singer: filterSinger(musicData.artists),\r\n    alId: musicData.album.id,\r\n    alPicUrl: musicData.album.picUrl,\r\n    alName: musicData.album.name,\r\n    alia: filterAlia(musicData.alias),\r\n    songName: musicData.name,\r\n    songId: musicData.id\r\n  });\r\n}\r\n\r\nfunction filterSinger(ar) {\r\n  let ret = [];\r\n  if (!ar) {\r\n    return \"\";\r\n  }\r\n  ar.forEach(arItem => {\r\n    ret.push(arItem.name);\r\n  });\r\n  return ret.join(\"/\");\r\n}\r\n\r\nfunction filterAlia(alia) {\r\n  let ret = [];\r\n  if (!alia) {\r\n    return \"\";\r\n  }\r\n  alia.forEach(element => {\r\n    ret.push(element);\r\n  });\r\n  return ret.join(\"/\");\r\n}\r\n"],"sourceRoot":""}